<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#6a11cb">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>–≠–ª–∞–π–Ω–µ—Ä-—Ç—Ä–µ–∫–µ—Ä üíé</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="icons/icon-192.png">
    <link rel="icon" type="image/png" href="icons/icon-192.png">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <!-- –í–µ—Å—å HTML –∫–æ–¥ –∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è -->
    <!-- ... -->
    
    <script src="script.js"></script>
    <script>
        // Service Worker —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è - –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û —Å –∞–±—Å–æ–ª—é—Ç–Ω—ã–º –ø—É—Ç–µ–º
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function() {
                const basePath = window.location.pathname.includes('/eligner-tracker/') 
                    ? '/eligner-tracker/' 
                    : '/';
                
                navigator.serviceWorker.register(basePath + 'service-worker.js')
                    .then(reg => console.log('Service Worker –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω:', reg.scope))
                    .catch(err => console.log('–û—à–∏–±–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:', err));
            });
        }
        
        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –Ω–∞ iOS
        if (window.navigator.standalone) {
            console.log('–ó–∞–ø—É—â–µ–Ω–æ –≤ –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–º —Ä–µ–∂–∏–º–µ iOS');
        }
        
        // –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ iOS
        const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;
        if (isIOS) {
            document.addEventListener('DOMContentLoaded', function() {
                const installHint = document.createElement('div');
                installHint.className = 'ios-install-hint';
                installHint.innerHTML = `
                    <div style="background: #f0f8ff; padding: 15px; border-radius: 10px; margin: 15px; text-align: center; border: 2px solid #6a11cb;">
                        <h3><i class="fas fa-mobile-alt"></i> –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –Ω–∞ iPhone:</h3>
                        <p>1. –ù–∞–∂–º–∏—Ç–µ <i class="fas fa-share"></i></p>
                        <p>2. –í—ã–±–µ—Ä–∏—Ç–µ "–ù–∞ —ç–∫—Ä–∞–Ω ¬´–î–æ–º–æ–π¬ª"</p>
                        <p>3. –ù–∞–∂–º–∏—Ç–µ "–î–æ–±–∞–≤–∏—Ç—å"</p>
                        <button onclick="this.parentElement.style.display='none'" style="margin-top: 10px; padding: 8px 20px; background: #6a11cb; color: white; border: none; border-radius: 20px;">
                            –ü–æ–Ω—è—Ç–Ω–æ
                        </button>
                    </div>
                `;
                document.querySelector('.container').prepend(installHint);
            });
        }
    </script>
</body>
</html>